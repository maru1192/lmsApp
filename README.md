# ①課題名
学習サポートアプリ

## ②課題内容（どんな作品か）
学習者のキャリア形成を包括的にサポートするWebアプリ。
コーチング的な要素も入れることで、効率的な学習体験が実現させたく作りました。

### 主な特徴
- **🔍 アンケートシステム** - 13問の質問で自己理解を深化させるとともに、適切な学習サポートができる土台を整備
- **📅 イベント管理** - イベントの作成・参加・管理・決済システムの導入
- **📊 学習記録** - 週次振り返りとレビュー機能


## ③機能一覧

### 1️⃣ ユーザー認証システム
- 新規登録（性別、生年月日対応）
- ログイン/ログアウト
- パスワードハッシュ化（`password_hash()`）
- セッション管理

### 2️⃣ 初回アンケート（Q1-Q13）
| 質問 | 内容 | データ形式 |
|------|------|-----------|
| Q1 | 就業状況・勤務時間 | テキスト |
| Q2 | 職種・業界 | テキスト |
| Q3 | 学習可能時間 | JSON（曜日別） |
| Q4 | 職務経歴 | テキスト |
| Q5-Q6 | ポジティブ/ネガティブな側面 | タグ + メモ |
| Q7 | 誇れる成果 | テキスト |
| Q8 | 強み | テキスト |
| Q9 | 大切にしたい価値観 | タグ + メモ |
| Q10 | 失敗パターン | タグ + メモ |
| Q11 | 将来ビジョン（3年後/1年後） | JSON |
| Q12 | 半年以内の目標（4項目） | JSON（絵文字付き） |
| Q13 | 学習に対する不安 | タグ |

### 3️⃣ イベント管理システム
- イベント作成・編集・削除
- イベント一覧表示
- 詳細ページ（画像アップロード対応）
- 参加申込・キャンセル機能
- 参加者管理

### 4️⃣ Stripe決済統合
- Checkout Session作成
- Webhook対応（決済完了処理）
- 決済履歴管理
- 成功/失敗ハンドリング

### 5️⃣ レビュー・振り返り機能
- 週次学習記録
- レビュー投稿・閲覧
- 学習成果の可視化


## ④ディレクトリ構造

```
1229_event/
├── config.php              # 共通設定
├── home.php                # ホーム画面
├── assets/                 # 共通アセット
│   └── css/
│       └── layout.css      # 全体レイアウト
├── login/                  # 認証関連
│   ├── login.php           # ログイン画面
│   ├── login_act.php       # ログイン処理
│   ├── signup.php          # 新規登録画面
│   └── signup_act.php      # 新規登録処理
├── career_regist/          # キャリア診断
│   ├── index.php           # 診断開始
│   ├── q01.php ~ q13.php   # 質問ページ
│   └── thanks.php          # 完了画面
├── event/                  # イベント管理
│   ├── event_list.php      # イベント一覧
│   ├── event_detail.php    # イベント詳細
│   ├── write.php           # イベント作成
│   ├── create_checkout.php # Stripe決済
│   ├── stripe_webhook.php  # Webhook受信
│   ├── func.php            # 共通関数
│   └── config/
│       └── stripe.php      # Stripe設定
├── user/                   # ユーザー管理
│   └── survey.php          # 初回アンケート結果表示
└── review/                 # レビュー機能
    ├── write.php           # レビュー投稿
    └── result.php          # レビュー一覧
```


## ⑤工夫した点・こだわり
### フォーム機能
- **直感的なフォーム設計** - アンケート項目を13ステップに分割
- **タグシステム** - 視覚的に選択しやすいタグUI

### 決済連携
- **Stripe Checkout** - 使いやすい決済フロー

### 共通レイアウト
- **メニューバー** - 全ページで統一されたヘッダー・フッター
- **セッション情報の表示** - ログイン中のユーザー名を常に表示




## ⑥難しかった点・学び
### 1. データベースの設計と作業の進め方
- DBの設計/設定 →　コードの作成  →　アンケート項目の練り直し →　コードの作成 →　DBの再設定の順で進めたらかなり工数がかかってしまいました。。当たり前ですが最初にアンケート項目をガッチリ決めておくべきでした。
- 「このエラーが出たらこれかも」みたいな感覚がほんのちょっとだけ芽生えました。あとは、エラー時に一つづつ原因を潰していくことが大切だと感じました。

### 2. StripeWebhookとの連携
- 他の部分を変更すると、なぜかデータベースの決済情報が一部NULLになっている問題が多発。;がないとか、同じファイルを二回読み込んでいるとか、様々なエラーパターンを経験できたのは逆に良かったです。
- StripeWebhookを活用することで、こちらで指定した形式（継続or単発決済/決済金額など）のページをStripeで作成することができ、かつ決済情報をデータベースに保存することができるのが学びでした。

### 3. さくらインターネットへのデプロイ
- 一度ファイルをサーバーアップした後、DB接続部分を関数化しそれをサーバーアップしなかったことが原因で永遠とエラーと戦ってました。修正したと思っても、VSコード上だけでサーバーアップできてないケースが今後も起きそうなので、良い失敗だったなと思います。


## ⑦次回トライしたいこと
- ユーザーごとに取得したデータを活用したデータの表示
    └ AIも活用したい
- ページ全体でのデザイン感の統一
- イベントで決済のありなしを選択可能に
- LINEAPIを活用したチャット機能
- LMS機能（動画視聴などができる）
- レスポンシブデザイン